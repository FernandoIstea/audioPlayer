const imgCover=document.querySelector("img#cover"),divPlayList=document.querySelector("div.playlist"),playButton=document.querySelector("img#play"),fforwardButton=document.querySelector("img#ffwd"),rewindButton=document.querySelector("img#frew"),imgVumeter=document.querySelector("img#vumeter"),progressBar=document.querySelector("div.progress-bar"),playingButtons={play:"images/play.png",pause:"images/pause.png"},vumeterImages={vumeterOn:"images/vumeter-on.gif",vumeterOff:"images/vumeter-off.gif"},contador={actual:1,total:playList.length};let index=1;const audioPlayer=new Audio;function cargarPlaylist(){playList.length>0&&(playList.forEach((e=>{const a=document.createElement("p");a.id=index,a.textContent=`${e.artist} - ${e.title}`,a.dataset.songname=e.source,divPlayList.append(a),index++})),agregarClickCanciones())}function agregarClickCanciones(){const e=document.querySelectorAll("p[data-songname]");e.length>0&&e.forEach((e=>{e.addEventListener("click",(()=>{const a=playList.find((a=>a.source===e.dataset.songname));imgCover.src=a.artwork[0].src,contador.actual=parseInt(e.id),audioPlayer.src=a.source,audioPlayer.play(),navigator.mediaSession.metadata=new MediaMetadata(a)}))}))}audioPlayer.id="audioPlayer",audioPlayer.src="",audioPlayer.preload="auto",audioPlayer.volume=.4,cargarPlaylist(),audioPlayer.addEventListener("timeupdate",(()=>{const e=audioPlayer.currentTime/audioPlayer.duration*100;progressBar.style.width=4*e+"px"})),audioPlayer.addEventListener("play",(()=>{imgVumeter.src=vumeterImages.vumeterOn,playButton.src=playingButtons.pause})),audioPlayer.addEventListener("pause",(()=>{imgVumeter.src=vumeterImages.vumeterOff,playButton.src=playingButtons.play})),audioPlayer.addEventListener("ended",(()=>{if(contador.actual<=contador.total){contador.actual++;const e=document.querySelector(`p[id="${contador.actual}"]`);e.scrollIntoView({behavior:"smooth"}),e.click()}})),playButton.addEventListener("click",(()=>{playButton.src.includes("play.png")?(playButton.src=playingButtons.pause,imgVumeter.src=vumeterImages.vumeterOn,audioPlayer.play()):(playButton.src=playingButtons.play,imgVumeter.src=vumeterImages.vumeterOff,audioPlayer.pause())}));